# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://coffeescript.org/
"use strict"
@app = angular.module("FoxHunter", ['ngResource', 'ngRoute'])

@app.config ["$httpProvider", ($httpProvider) ->
    token = $('meta[name=csrf-token]').attr('content')
    $httpProvider.defaults.headers.common['X-CSRF-Token'] = token
]

@app.config ["$routeProvider", "$locationProvider", ($routeProvider, $locationProvider) ->
    $locationProvider.html5Mode(true)
    $routeProvider
    .when('/issues',
            {templateUrl: '<%= asset_path('issues/index.html.slim') %>', controller: IssueIndexCtrl})
    .when('/issues/:id',
            {templateUrl: '<%= asset_path('issues/show.html.slim') %>', controller: IssueShowCtrl})
    .otherwise(redirectTo: '/')
]
